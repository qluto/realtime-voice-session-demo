# Repository Guidelines

## Project Structure & Module Organization
The realtime coach UI renders through Next.js under `app/`. `page.tsx` mounts the React-ready `<RealtimeApp />` component from `components/realtime/`, while browser orchestration is handled by `setupVoiceAgent` exported from `lib/voice-agent`. Voice-agent utilities (timers, usage tracking, prompt presets, etc.) live under `lib/voice-agent/utils`, and the session analyzer sits beside them in `lib/voice-agent/session-analyzer`. Styling lives in `app/globals.css`, and static assets belong in `public/`. Use `docs/` for long-form explainers, and keep build outputs confined to `.next/` (generated by Next.js). The token broker is served from `app/api/generate-token/route.ts`, with `generate-token.js` as a CLI fallback.

## Build, Test, and Development Commands
- `npm run dev`: start the Next.js dev server on http://localhost:3000.
- `npm run dev:full`: alias for `npm run dev` (kept for continuity).
- `npm run build`: run `next build` for type-checking and production output in `.next/`.
- `npm run start`: serve the optimized production build.
- `npm run lint`: run Next.js ESLint checks.

## Coding Style & Naming Conventions
Write TypeScript modules using ES imports with explicit `.ts`/`.tsx` extensions. Follow the repository’s two-space indentation and no-semicolon formatting. Prefer descriptive camelCase for variables and functions, PascalCase for exported types, and kebab-case for DOM ids/classes to match `app/globals.css`. Keep utility filenames aligned with existing patterns (`conversation-logger.ts`, etc.), and resolve unused symbol warnings rather than suppressing them.

## Testing Guidelines
Automated tests are not configured. After changes, run `npm run dev`, open the UI, and confirm the conversation log and session timer update as expected. When modifying cost calculations, inspect console usage dumps for regressions. If you add tests, colocate them as `*.test.ts` beside their source and document the new command in this guide.

## Commit & Pull Request Guidelines
Use concise, imperative commit messages mirroring existing history (example: `Add session timer HUD`). For PRs, include a summary of behavior changes, link related issues, list manual verification steps, and attach screenshots or console output for UI updates.

## Security & Configuration Tips
Create a local `.env` defining `OPENAI_API_KEY=…` and never commit it. Export the variable when running the app or `generate-token.js`, and regenerate ephemeral tokens for each session; avoid pasting tokens into logs or commits. Optionally set `NEXT_PUBLIC_TOKEN_ENDPOINT` or `OPENAI_REALTIME_MODEL` for advanced configurations.
